{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n  fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n  style: defaults({\n    fill: true,\n    stroke: true,\n    fillOpacity: true,\n    strokeOpacity: true,\n    lineWidth: true,\n    fontSize: true,\n    lineHeight: true,\n    width: true,\n    height: true,\n    textShadowColor: true,\n    textShadowBlur: true,\n    textShadowOffsetX: true,\n    textShadowOffsetY: true,\n    backgroundColor: true,\n    padding: true,\n    borderColor: true,\n    borderWidth: true,\n    borderRadius: true\n  }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = function (_super) {\n  __extends(ZRText, _super);\n  function ZRText(opts) {\n    var _this = _super.call(this) || this;\n    _this.type = 'text';\n    _this._children = [];\n    _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n    _this.attr(opts);\n    return _this;\n  }\n  ZRText.prototype.childrenRef = function () {\n    return this._children;\n  };\n  ZRText.prototype.update = function () {\n    _super.prototype.update.call(this);\n    if (this.styleChanged()) {\n      this._updateSubTexts();\n    }\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      child.zlevel = this.zlevel;\n      child.z = this.z;\n      child.z2 = this.z2;\n      child.culling = this.culling;\n      child.cursor = this.cursor;\n      child.invisible = this.invisible;\n    }\n  };\n  ZRText.prototype.updateTransform = function () {\n    var innerTransformable = this.innerTransformable;\n    if (innerTransformable) {\n      innerTransformable.updateTransform();\n      if (innerTransformable.transform) {\n        this.transform = innerTransformable.transform;\n      }\n    } else {\n      _super.prototype.updateTransform.call(this);\n    }\n  };\n  ZRText.prototype.getLocalTransform = function (m) {\n    var innerTransformable = this.innerTransformable;\n    return innerTransformable ? innerTransformable.getLocalTransform(m) : _super.prototype.getLocalTransform.call(this, m);\n  };\n  ZRText.prototype.getComputedTransform = function () {\n    if (this.__hostTarget) {\n      this.__hostTarget.getComputedTransform();\n      this.__hostTarget.updateInnerText(true);\n    }\n    return _super.prototype.getComputedTransform.call(this);\n  };\n  ZRText.prototype._updateSubTexts = function () {\n    this._childCursor = 0;\n    normalizeTextStyle(this.style);\n    this.style.rich ? this._updateRichTexts() : this._updatePlainTexts();\n    this._children.length = this._childCursor;\n    this.styleUpdated();\n  };\n  ZRText.prototype.addSelfToZr = function (zr) {\n    _super.prototype.addSelfToZr.call(this, zr);\n    for (var i = 0; i < this._children.length; i++) {\n      this._children[i].__zr = zr;\n    }\n  };\n  ZRText.prototype.removeSelfFromZr = function (zr) {\n    _super.prototype.removeSelfFromZr.call(this, zr);\n    for (var i = 0; i < this._children.length; i++) {\n      this._children[i].__zr = null;\n    }\n  };\n  ZRText.prototype.getBoundingRect = function () {\n    if (this.styleChanged()) {\n      this._updateSubTexts();\n    }\n    if (!this._rect) {\n      var tmpRect = new BoundingRect(0, 0, 0, 0);\n      var children = this._children;\n      var tmpMat = [];\n      var rect = null;\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        var childRect = child.getBoundingRect();\n        var transform = child.getLocalTransform(tmpMat);\n        if (transform) {\n          tmpRect.copy(childRect);\n          tmpRect.applyTransform(transform);\n          rect = rect || tmpRect.clone();\n          rect.union(tmpRect);\n        } else {\n          rect = rect || childRect.clone();\n          rect.union(childRect);\n        }\n      }\n      this._rect = rect || tmpRect;\n    }\n    return this._rect;\n  };\n  ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n    this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n  };\n  ZRText.prototype.setTextContent = function (textContent) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('Can\\'t attach text on another text');\n    }\n  };\n  ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n    if (!sourceStyle) {\n      return targetStyle;\n    }\n    var sourceRich = sourceStyle.rich;\n    var targetRich = targetStyle.rich || sourceRich && {};\n    extend(targetStyle, sourceStyle);\n    if (sourceRich && targetRich) {\n      this._mergeRich(targetRich, sourceRich);\n      targetStyle.rich = targetRich;\n    } else if (targetRich) {\n      targetStyle.rich = targetRich;\n    }\n    return targetStyle;\n  };\n  ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n    var richNames = keys(sourceRich);\n    for (var i = 0; i < richNames.length; i++) {\n      var richName = richNames[i];\n      targetRich[richName] = targetRich[richName] || {};\n      extend(targetRich[richName], sourceRich[richName]);\n    }\n  };\n  ZRText.prototype.getAnimationStyleProps = function () {\n    return DEFAULT_TEXT_ANIMATION_PROPS;\n  };\n  ZRText.prototype._getOrCreateChild = function (Ctor) {\n    var child = this._children[this._childCursor];\n    if (!child || !(child instanceof Ctor)) {\n      child = new Ctor();\n    }\n    this._children[this._childCursor++] = child;\n    child.__zr = this.__zr;\n    child.parent = this;\n    return child;\n  };\n  ZRText.prototype._updatePlainTexts = function () {\n    var style = this.style;\n    var textFont = style.font || DEFAULT_FONT;\n    var textPadding = style.padding;\n    var text = getStyleText(style);\n    var contentBlock = parsePlainText(text, style);\n    var needDrawBg = needDrawBackground(style);\n    var bgColorDrawn = !!style.backgroundColor;\n    var outerHeight = contentBlock.outerHeight;\n    var outerWidth = contentBlock.outerWidth;\n    var contentWidth = contentBlock.contentWidth;\n    var textLines = contentBlock.lines;\n    var lineHeight = contentBlock.lineHeight;\n    var defaultStyle = this._defaultStyle;\n    var baseX = style.x || 0;\n    var baseY = style.y || 0;\n    var textAlign = style.align || defaultStyle.align || 'left';\n    var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n    var textX = baseX;\n    var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n    if (needDrawBg || textPadding) {\n      var boxX = adjustTextX(baseX, outerWidth, textAlign);\n      var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n      needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n    }\n    textY += lineHeight / 2;\n    if (textPadding) {\n      textX = getTextXForPadding(baseX, textAlign, textPadding);\n      if (verticalAlign === 'top') {\n        textY += textPadding[0];\n      } else if (verticalAlign === 'bottom') {\n        textY -= textPadding[2];\n      }\n    }\n    var defaultLineWidth = 0;\n    var useDefaultFill = false;\n    var textFill = getFill('fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n    var textStroke = getStroke('stroke' in style ? style.stroke : !bgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n    var hasShadow = style.textShadowBlur > 0;\n    var fixedBoundingRect = style.width != null && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n    var calculatedLineHeight = contentBlock.calculatedLineHeight;\n    for (var i = 0; i < textLines.length; i++) {\n      var el = this._getOrCreateChild(TSpan);\n      var subElStyle = el.createStyle();\n      el.useStyle(subElStyle);\n      subElStyle.text = textLines[i];\n      subElStyle.x = textX;\n      subElStyle.y = textY;\n      if (textAlign) {\n        subElStyle.textAlign = textAlign;\n      }\n      subElStyle.textBaseline = 'middle';\n      subElStyle.opacity = style.opacity;\n      subElStyle.strokeFirst = true;\n      if (hasShadow) {\n        subElStyle.shadowBlur = style.textShadowBlur || 0;\n        subElStyle.shadowColor = style.textShadowColor || 'transparent';\n        subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n        subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n      }\n      subElStyle.stroke = textStroke;\n      subElStyle.fill = textFill;\n      if (textStroke) {\n        subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n        subElStyle.lineDash = style.lineDash;\n        subElStyle.lineDashOffset = style.lineDashOffset || 0;\n      }\n      subElStyle.font = textFont;\n      setSeparateFont(subElStyle, style);\n      textY += lineHeight;\n      if (fixedBoundingRect) {\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n      }\n    }\n  };\n  ZRText.prototype._updateRichTexts = function () {\n    var style = this.style;\n    var text = getStyleText(style);\n    var contentBlock = parseRichText(text, style);\n    var contentWidth = contentBlock.width;\n    var outerWidth = contentBlock.outerWidth;\n    var outerHeight = contentBlock.outerHeight;\n    var textPadding = style.padding;\n    var baseX = style.x || 0;\n    var baseY = style.y || 0;\n    var defaultStyle = this._defaultStyle;\n    var textAlign = style.align || defaultStyle.align;\n    var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n    var boxX = adjustTextX(baseX, outerWidth, textAlign);\n    var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n    var xLeft = boxX;\n    var lineTop = boxY;\n    if (textPadding) {\n      xLeft += textPadding[3];\n      lineTop += textPadding[0];\n    }\n    var xRight = xLeft + contentWidth;\n    if (needDrawBackground(style)) {\n      this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n    }\n    var bgColorDrawn = !!style.backgroundColor;\n    for (var i = 0; i < contentBlock.lines.length; i++) {\n      var line = contentBlock.lines[i];\n      var tokens = line.tokens;\n      var tokenCount = tokens.length;\n      var lineHeight = line.lineHeight;\n      var remainedWidth = line.width;\n      var leftIndex = 0;\n      var lineXLeft = xLeft;\n      var lineXRight = xRight;\n      var rightIndex = tokenCount - 1;\n      var token = void 0;\n      while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n        this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n        remainedWidth -= token.width;\n        lineXLeft += token.width;\n        leftIndex++;\n      }\n      while (rightIndex >= 0 && (token = tokens[rightIndex], token.align === 'right')) {\n        this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n        remainedWidth -= token.width;\n        lineXRight -= token.width;\n        rightIndex--;\n      }\n      lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n      while (leftIndex <= rightIndex) {\n        token = tokens[leftIndex];\n        this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n        lineXLeft += token.width;\n        leftIndex++;\n      }\n      lineTop += lineHeight;\n    }\n  };\n  ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n    var tokenStyle = style.rich[token.styleName] || {};\n    tokenStyle.text = token.text;\n    var verticalAlign = token.verticalAlign;\n    var y = lineTop + lineHeight / 2;\n    if (verticalAlign === 'top') {\n      y = lineTop + token.height / 2;\n    } else if (verticalAlign === 'bottom') {\n      y = lineTop + lineHeight - token.height / 2;\n    }\n    var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n    needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n    var bgColorDrawn = !!tokenStyle.backgroundColor;\n    var textPadding = token.textPadding;\n    if (textPadding) {\n      x = getTextXForPadding(x, textAlign, textPadding);\n      y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n    }\n    var el = this._getOrCreateChild(TSpan);\n    var subElStyle = el.createStyle();\n    el.useStyle(subElStyle);\n    var defaultStyle = this._defaultStyle;\n    var useDefaultFill = false;\n    var defaultLineWidth = 0;\n    var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill : 'fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n    var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke : 'stroke' in style ? style.stroke : !bgColorDrawn && !parentBgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n    var hasShadow = tokenStyle.textShadowBlur > 0 || style.textShadowBlur > 0;\n    subElStyle.text = token.text;\n    subElStyle.x = x;\n    subElStyle.y = y;\n    if (hasShadow) {\n      subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n      subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n      subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n      subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n    }\n    subElStyle.textAlign = textAlign;\n    subElStyle.textBaseline = 'middle';\n    subElStyle.font = token.font || DEFAULT_FONT;\n    subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n    setSeparateFont(subElStyle, tokenStyle);\n    if (textStroke) {\n      subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n      subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n      subElStyle.lineDashOffset = style.lineDashOffset || 0;\n      subElStyle.stroke = textStroke;\n    }\n    if (textFill) {\n      subElStyle.fill = textFill;\n    }\n    var textWidth = token.contentWidth;\n    var textHeight = token.contentHeight;\n    el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n  };\n  ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n    var textBackgroundColor = style.backgroundColor;\n    var textBorderWidth = style.borderWidth;\n    var textBorderColor = style.borderColor;\n    var isImageBg = textBackgroundColor && textBackgroundColor.image;\n    var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n    var textBorderRadius = style.borderRadius;\n    var self = this;\n    var rectEl;\n    var imgEl;\n    if (isPlainOrGradientBg || style.lineHeight || textBorderWidth && textBorderColor) {\n      rectEl = this._getOrCreateChild(Rect);\n      rectEl.useStyle(rectEl.createStyle());\n      rectEl.style.fill = null;\n      var rectShape = rectEl.shape;\n      rectShape.x = x;\n      rectShape.y = y;\n      rectShape.width = width;\n      rectShape.height = height;\n      rectShape.r = textBorderRadius;\n      rectEl.dirtyShape();\n    }\n    if (isPlainOrGradientBg) {\n      var rectStyle = rectEl.style;\n      rectStyle.fill = textBackgroundColor || null;\n      rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n    } else if (isImageBg) {\n      imgEl = this._getOrCreateChild(ZRImage);\n      imgEl.onload = function () {\n        self.dirtyStyle();\n      };\n      var imgStyle = imgEl.style;\n      imgStyle.image = textBackgroundColor.image;\n      imgStyle.x = x;\n      imgStyle.y = y;\n      imgStyle.width = width;\n      imgStyle.height = height;\n    }\n    if (textBorderWidth && textBorderColor) {\n      var rectStyle = rectEl.style;\n      rectStyle.lineWidth = textBorderWidth;\n      rectStyle.stroke = textBorderColor;\n      rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n      rectStyle.lineDash = style.borderDash;\n      rectStyle.lineDashOffset = style.borderDashOffset || 0;\n      rectEl.strokeContainThreshold = 0;\n      if (rectEl.hasFill() && rectEl.hasStroke()) {\n        rectStyle.strokeFirst = true;\n        rectStyle.lineWidth *= 2;\n      }\n    }\n    var commonStyle = (rectEl || imgEl).style;\n    commonStyle.shadowBlur = style.shadowBlur || 0;\n    commonStyle.shadowColor = style.shadowColor || 'transparent';\n    commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n    commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n    commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n  };\n  ZRText.makeFont = function (style) {\n    var font = '';\n    if (hasSeparateFont(style)) {\n      font = [style.fontStyle, style.fontWeight, parseFontSize(style.fontSize), style.fontFamily || 'sans-serif'].join(' ');\n    }\n    return font && trim(font) || style.textFont || style.font;\n  };\n  return ZRText;\n}(Displayable);\nvar VALID_TEXT_ALIGN = {\n  left: true,\n  right: 1,\n  center: 1\n};\nvar VALID_TEXT_VERTICAL_ALIGN = {\n  top: 1,\n  bottom: 1,\n  middle: 1\n};\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n  if (typeof fontSize === 'string' && (fontSize.indexOf('px') !== -1 || fontSize.indexOf('rem') !== -1 || fontSize.indexOf('em') !== -1)) {\n    return fontSize;\n  } else if (!isNaN(+fontSize)) {\n    return fontSize + 'px';\n  } else {\n    return DEFAULT_FONT_SIZE + 'px';\n  }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n  for (var i = 0; i < FONT_PARTS.length; i++) {\n    var fontProp = FONT_PARTS[i];\n    var val = sourceStyle[fontProp];\n    if (val != null) {\n      targetStyle[fontProp] = val;\n    }\n  }\n}\nexport function hasSeparateFont(style) {\n  return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n  normalizeStyle(style);\n  each(style.rich, normalizeStyle);\n  return style;\n}\nfunction normalizeStyle(style) {\n  if (style) {\n    style.font = ZRText.makeFont(style);\n    var textAlign = style.align;\n    textAlign === 'middle' && (textAlign = 'center');\n    style.align = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left';\n    var verticalAlign = style.verticalAlign;\n    verticalAlign === 'center' && (verticalAlign = 'middle');\n    style.verticalAlign = verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign] ? verticalAlign : 'top';\n    var textPadding = style.padding;\n    if (textPadding) {\n      style.padding = normalizeCssArray(style.padding);\n    }\n  }\n}\nfunction getStroke(stroke, lineWidth) {\n  return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null : stroke.image || stroke.colorStops ? '#000' : stroke;\n}\nfunction getFill(fill) {\n  return fill == null || fill === 'none' ? null : fill.image || fill.colorStops ? '#000' : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\nfunction getStyleText(style) {\n  var text = style.text;\n  text != null && (text += '');\n  return text;\n}\nfunction needDrawBackground(style) {\n  return !!(style.backgroundColor || style.lineHeight || style.borderWidth && style.borderColor);\n}\nexport default ZRText;","map":{"version":3,"names":["__extends","parseRichText","parsePlainText","TSpan","retrieve2","each","normalizeCssArray","trim","retrieve3","extend","keys","defaults","adjustTextX","adjustTextY","ZRImage","Rect","BoundingRect","Displayable","DEFAULT_COMMON_ANIMATION_PROPS","DEFAULT_FONT","DEFAULT_FONT_SIZE","DEFAULT_RICH_TEXT_COLOR","fill","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","style","stroke","fillOpacity","strokeOpacity","lineWidth","fontSize","lineHeight","width","height","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","padding","borderColor","borderWidth","borderRadius","ZRText","_super","opts","_this","call","type","_children","_defaultStyle","attr","prototype","childrenRef","update","styleChanged","_updateSubTexts","i","length","child","zlevel","z","z2","culling","cursor","invisible","updateTransform","innerTransformable","transform","getLocalTransform","m","getComputedTransform","__hostTarget","updateInnerText","_childCursor","normalizeTextStyle","rich","_updateRichTexts","_updatePlainTexts","styleUpdated","addSelfToZr","zr","__zr","removeSelfFromZr","getBoundingRect","_rect","tmpRect","children","tmpMat","rect","childRect","copy","applyTransform","clone","union","setDefaultTextStyle","defaultTextStyle","setTextContent","textContent","process","env","NODE_ENV","Error","_mergeStyle","targetStyle","sourceStyle","sourceRich","targetRich","_mergeRich","richNames","richName","getAnimationStyleProps","_getOrCreateChild","Ctor","parent","textFont","font","textPadding","text","getStyleText","contentBlock","needDrawBg","needDrawBackground","bgColorDrawn","outerHeight","outerWidth","contentWidth","textLines","lines","defaultStyle","baseX","x","baseY","y","textAlign","align","verticalAlign","textX","textY","contentHeight","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","textFill","getFill","textStroke","getStroke","autoStroke","hasShadow","fixedBoundingRect","overflow","calculatedLineHeight","el","subElStyle","createStyle","useStyle","textBaseline","opacity","strokeFirst","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","lineDash","lineDashOffset","setSeparateFont","setBoundingRect","xLeft","lineTop","xRight","line","tokens","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","token","_placeToken","parentBgColorDrawn","tokenStyle","styleName","isLineHolder","innerHeight","textWidth","textHeight","topStyle","textBackgroundColor","textBorderWidth","textBorderColor","isImageBg","image","isPlainOrGradientBg","textBorderRadius","self","rectEl","imgEl","rectShape","shape","r","dirtyShape","rectStyle","onload","dirtyStyle","imgStyle","borderDash","borderDashOffset","strokeContainThreshold","hasFill","hasStroke","commonStyle","makeFont","hasSeparateFont","fontStyle","fontWeight","parseFontSize","fontFamily","join","VALID_TEXT_ALIGN","left","right","center","VALID_TEXT_VERTICAL_ALIGN","top","bottom","middle","FONT_PARTS","indexOf","isNaN","fontProp","val","normalizeStyle","colorStops"],"sources":["F:/idea_Project_2023/design_3/project/node_modules/zrender/lib/graphic/Text.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,aAAa,EAAEC,cAAc,QAAQ,uBAAuB;AACrE,OAAOC,KAAK,MAAM,YAAY;AAC9B,SAASC,SAAS,EAAEC,IAAI,EAAEC,iBAAiB,EAAEC,IAAI,EAAEC,SAAS,EAAEC,MAAM,EAAEC,IAAI,EAAEC,QAAQ,QAAQ,iBAAiB;AAC7G,SAASC,WAAW,EAAEC,WAAW,QAAQ,oBAAoB;AAC7D,OAAOC,OAAO,MAAM,YAAY;AAChC,OAAOC,IAAI,MAAM,iBAAiB;AAClC,OAAOC,YAAY,MAAM,yBAAyB;AAClD,OAAOC,WAAW,IAAIC,8BAA8B,QAAQ,kBAAkB;AAC9E,SAASC,YAAY,EAAEC,iBAAiB,QAAQ,qBAAqB;AACrE,IAAIC,uBAAuB,GAAG;EAC1BC,IAAI,EAAE;AACV,CAAC;AACD,IAAIC,yBAAyB,GAAG,CAAC;AACjC,OAAO,IAAIC,4BAA4B,GAAG;EACtCC,KAAK,EAAEd,QAAQ,CAAC;IACZW,IAAI,EAAE,IAAI;IACVI,MAAM,EAAE,IAAI;IACZC,WAAW,EAAE,IAAI;IACjBC,aAAa,EAAE,IAAI;IACnBC,SAAS,EAAE,IAAI;IACfC,QAAQ,EAAE,IAAI;IACdC,UAAU,EAAE,IAAI;IAChBC,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE,IAAI;IACZC,eAAe,EAAE,IAAI;IACrBC,cAAc,EAAE,IAAI;IACpBC,iBAAiB,EAAE,IAAI;IACvBC,iBAAiB,EAAE,IAAI;IACvBC,eAAe,EAAE,IAAI;IACrBC,OAAO,EAAE,IAAI;IACbC,WAAW,EAAE,IAAI;IACjBC,WAAW,EAAE,IAAI;IACjBC,YAAY,EAAE;EAClB,CAAC,EAAExB,8BAA8B,CAACO,KAAK;AAC3C,CAAC;AACD,IAAIkB,MAAM,GAAI,UAAUC,MAAM,EAAE;EAC5B5C,SAAS,CAAC2C,MAAM,EAAEC,MAAM,CAAC;EACzB,SAASD,MAAMA,CAACE,IAAI,EAAE;IAClB,IAAIC,KAAK,GAAGF,MAAM,CAACG,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI;IACrCD,KAAK,CAACE,IAAI,GAAG,MAAM;IACnBF,KAAK,CAACG,SAAS,GAAG,EAAE;IACpBH,KAAK,CAACI,aAAa,GAAG7B,uBAAuB;IAC7CyB,KAAK,CAACK,IAAI,CAACN,IAAI,CAAC;IAChB,OAAOC,KAAK;EAChB;EACAH,MAAM,CAACS,SAAS,CAACC,WAAW,GAAG,YAAY;IACvC,OAAO,IAAI,CAACJ,SAAS;EACzB,CAAC;EACDN,MAAM,CAACS,SAAS,CAACE,MAAM,GAAG,YAAY;IAClCV,MAAM,CAACQ,SAAS,CAACE,MAAM,CAACP,IAAI,CAAC,IAAI,CAAC;IAClC,IAAI,IAAI,CAACQ,YAAY,EAAE,EAAE;MACrB,IAAI,CAACC,eAAe,EAAE;IAC1B;IACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACR,SAAS,CAACS,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,IAAIE,KAAK,GAAG,IAAI,CAACV,SAAS,CAACQ,CAAC,CAAC;MAC7BE,KAAK,CAACC,MAAM,GAAG,IAAI,CAACA,MAAM;MAC1BD,KAAK,CAACE,CAAC,GAAG,IAAI,CAACA,CAAC;MAChBF,KAAK,CAACG,EAAE,GAAG,IAAI,CAACA,EAAE;MAClBH,KAAK,CAACI,OAAO,GAAG,IAAI,CAACA,OAAO;MAC5BJ,KAAK,CAACK,MAAM,GAAG,IAAI,CAACA,MAAM;MAC1BL,KAAK,CAACM,SAAS,GAAG,IAAI,CAACA,SAAS;IACpC;EACJ,CAAC;EACDtB,MAAM,CAACS,SAAS,CAACc,eAAe,GAAG,YAAY;IAC3C,IAAIC,kBAAkB,GAAG,IAAI,CAACA,kBAAkB;IAChD,IAAIA,kBAAkB,EAAE;MACpBA,kBAAkB,CAACD,eAAe,EAAE;MACpC,IAAIC,kBAAkB,CAACC,SAAS,EAAE;QAC9B,IAAI,CAACA,SAAS,GAAGD,kBAAkB,CAACC,SAAS;MACjD;IACJ,CAAC,MACI;MACDxB,MAAM,CAACQ,SAAS,CAACc,eAAe,CAACnB,IAAI,CAAC,IAAI,CAAC;IAC/C;EACJ,CAAC;EACDJ,MAAM,CAACS,SAAS,CAACiB,iBAAiB,GAAG,UAAUC,CAAC,EAAE;IAC9C,IAAIH,kBAAkB,GAAG,IAAI,CAACA,kBAAkB;IAChD,OAAOA,kBAAkB,GACnBA,kBAAkB,CAACE,iBAAiB,CAACC,CAAC,CAAC,GACvC1B,MAAM,CAACQ,SAAS,CAACiB,iBAAiB,CAACtB,IAAI,CAAC,IAAI,EAAEuB,CAAC,CAAC;EAC1D,CAAC;EACD3B,MAAM,CAACS,SAAS,CAACmB,oBAAoB,GAAG,YAAY;IAChD,IAAI,IAAI,CAACC,YAAY,EAAE;MACnB,IAAI,CAACA,YAAY,CAACD,oBAAoB,EAAE;MACxC,IAAI,CAACC,YAAY,CAACC,eAAe,CAAC,IAAI,CAAC;IAC3C;IACA,OAAO7B,MAAM,CAACQ,SAAS,CAACmB,oBAAoB,CAACxB,IAAI,CAAC,IAAI,CAAC;EAC3D,CAAC;EACDJ,MAAM,CAACS,SAAS,CAACI,eAAe,GAAG,YAAY;IAC3C,IAAI,CAACkB,YAAY,GAAG,CAAC;IACrBC,kBAAkB,CAAC,IAAI,CAAClD,KAAK,CAAC;IAC9B,IAAI,CAACA,KAAK,CAACmD,IAAI,GACT,IAAI,CAACC,gBAAgB,EAAE,GACvB,IAAI,CAACC,iBAAiB,EAAE;IAC9B,IAAI,CAAC7B,SAAS,CAACS,MAAM,GAAG,IAAI,CAACgB,YAAY;IACzC,IAAI,CAACK,YAAY,EAAE;EACvB,CAAC;EACDpC,MAAM,CAACS,SAAS,CAAC4B,WAAW,GAAG,UAAUC,EAAE,EAAE;IACzCrC,MAAM,CAACQ,SAAS,CAAC4B,WAAW,CAACjC,IAAI,CAAC,IAAI,EAAEkC,EAAE,CAAC;IAC3C,KAAK,IAAIxB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACR,SAAS,CAACS,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,IAAI,CAACR,SAAS,CAACQ,CAAC,CAAC,CAACyB,IAAI,GAAGD,EAAE;IAC/B;EACJ,CAAC;EACDtC,MAAM,CAACS,SAAS,CAAC+B,gBAAgB,GAAG,UAAUF,EAAE,EAAE;IAC9CrC,MAAM,CAACQ,SAAS,CAAC+B,gBAAgB,CAACpC,IAAI,CAAC,IAAI,EAAEkC,EAAE,CAAC;IAChD,KAAK,IAAIxB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACR,SAAS,CAACS,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,IAAI,CAACR,SAAS,CAACQ,CAAC,CAAC,CAACyB,IAAI,GAAG,IAAI;IACjC;EACJ,CAAC;EACDvC,MAAM,CAACS,SAAS,CAACgC,eAAe,GAAG,YAAY;IAC3C,IAAI,IAAI,CAAC7B,YAAY,EAAE,EAAE;MACrB,IAAI,CAACC,eAAe,EAAE;IAC1B;IACA,IAAI,CAAC,IAAI,CAAC6B,KAAK,EAAE;MACb,IAAIC,OAAO,GAAG,IAAItE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MAC1C,IAAIuE,QAAQ,GAAG,IAAI,CAACtC,SAAS;MAC7B,IAAIuC,MAAM,GAAG,EAAE;MACf,IAAIC,IAAI,GAAG,IAAI;MACf,KAAK,IAAIhC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8B,QAAQ,CAAC7B,MAAM,EAAED,CAAC,EAAE,EAAE;QACtC,IAAIE,KAAK,GAAG4B,QAAQ,CAAC9B,CAAC,CAAC;QACvB,IAAIiC,SAAS,GAAG/B,KAAK,CAACyB,eAAe,EAAE;QACvC,IAAIhB,SAAS,GAAGT,KAAK,CAACU,iBAAiB,CAACmB,MAAM,CAAC;QAC/C,IAAIpB,SAAS,EAAE;UACXkB,OAAO,CAACK,IAAI,CAACD,SAAS,CAAC;UACvBJ,OAAO,CAACM,cAAc,CAACxB,SAAS,CAAC;UACjCqB,IAAI,GAAGA,IAAI,IAAIH,OAAO,CAACO,KAAK,EAAE;UAC9BJ,IAAI,CAACK,KAAK,CAACR,OAAO,CAAC;QACvB,CAAC,MACI;UACDG,IAAI,GAAGA,IAAI,IAAIC,SAAS,CAACG,KAAK,EAAE;UAChCJ,IAAI,CAACK,KAAK,CAACJ,SAAS,CAAC;QACzB;MACJ;MACA,IAAI,CAACL,KAAK,GAAGI,IAAI,IAAIH,OAAO;IAChC;IACA,OAAO,IAAI,CAACD,KAAK;EACrB,CAAC;EACD1C,MAAM,CAACS,SAAS,CAAC2C,mBAAmB,GAAG,UAAUC,gBAAgB,EAAE;IAC/D,IAAI,CAAC9C,aAAa,GAAG8C,gBAAgB,IAAI3E,uBAAuB;EACpE,CAAC;EACDsB,MAAM,CAACS,SAAS,CAAC6C,cAAc,GAAG,UAAUC,WAAW,EAAE;IACrD,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;MACvC,MAAM,IAAIC,KAAK,CAAC,oCAAoC,CAAC;IACzD;EACJ,CAAC;EACD3D,MAAM,CAACS,SAAS,CAACmD,WAAW,GAAG,UAAUC,WAAW,EAAEC,WAAW,EAAE;IAC/D,IAAI,CAACA,WAAW,EAAE;MACd,OAAOD,WAAW;IACtB;IACA,IAAIE,UAAU,GAAGD,WAAW,CAAC7B,IAAI;IACjC,IAAI+B,UAAU,GAAGH,WAAW,CAAC5B,IAAI,IAAK8B,UAAU,IAAI,CAAC,CAAE;IACvDjG,MAAM,CAAC+F,WAAW,EAAEC,WAAW,CAAC;IAChC,IAAIC,UAAU,IAAIC,UAAU,EAAE;MAC1B,IAAI,CAACC,UAAU,CAACD,UAAU,EAAED,UAAU,CAAC;MACvCF,WAAW,CAAC5B,IAAI,GAAG+B,UAAU;IACjC,CAAC,MACI,IAAIA,UAAU,EAAE;MACjBH,WAAW,CAAC5B,IAAI,GAAG+B,UAAU;IACjC;IACA,OAAOH,WAAW;EACtB,CAAC;EACD7D,MAAM,CAACS,SAAS,CAACwD,UAAU,GAAG,UAAUD,UAAU,EAAED,UAAU,EAAE;IAC5D,IAAIG,SAAS,GAAGnG,IAAI,CAACgG,UAAU,CAAC;IAChC,KAAK,IAAIjD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoD,SAAS,CAACnD,MAAM,EAAED,CAAC,EAAE,EAAE;MACvC,IAAIqD,QAAQ,GAAGD,SAAS,CAACpD,CAAC,CAAC;MAC3BkD,UAAU,CAACG,QAAQ,CAAC,GAAGH,UAAU,CAACG,QAAQ,CAAC,IAAI,CAAC,CAAC;MACjDrG,MAAM,CAACkG,UAAU,CAACG,QAAQ,CAAC,EAAEJ,UAAU,CAACI,QAAQ,CAAC,CAAC;IACtD;EACJ,CAAC;EACDnE,MAAM,CAACS,SAAS,CAAC2D,sBAAsB,GAAG,YAAY;IAClD,OAAOvF,4BAA4B;EACvC,CAAC;EACDmB,MAAM,CAACS,SAAS,CAAC4D,iBAAiB,GAAG,UAAUC,IAAI,EAAE;IACjD,IAAItD,KAAK,GAAG,IAAI,CAACV,SAAS,CAAC,IAAI,CAACyB,YAAY,CAAC;IAC7C,IAAI,CAACf,KAAK,IAAI,EAAEA,KAAK,YAAYsD,IAAI,CAAC,EAAE;MACpCtD,KAAK,GAAG,IAAIsD,IAAI,EAAE;IACtB;IACA,IAAI,CAAChE,SAAS,CAAC,IAAI,CAACyB,YAAY,EAAE,CAAC,GAAGf,KAAK;IAC3CA,KAAK,CAACuB,IAAI,GAAG,IAAI,CAACA,IAAI;IACtBvB,KAAK,CAACuD,MAAM,GAAG,IAAI;IACnB,OAAOvD,KAAK;EAChB,CAAC;EACDhB,MAAM,CAACS,SAAS,CAAC0B,iBAAiB,GAAG,YAAY;IAC7C,IAAIrD,KAAK,GAAG,IAAI,CAACA,KAAK;IACtB,IAAI0F,QAAQ,GAAG1F,KAAK,CAAC2F,IAAI,IAAIjG,YAAY;IACzC,IAAIkG,WAAW,GAAG5F,KAAK,CAACc,OAAO;IAC/B,IAAI+E,IAAI,GAAGC,YAAY,CAAC9F,KAAK,CAAC;IAC9B,IAAI+F,YAAY,GAAGtH,cAAc,CAACoH,IAAI,EAAE7F,KAAK,CAAC;IAC9C,IAAIgG,UAAU,GAAGC,kBAAkB,CAACjG,KAAK,CAAC;IAC1C,IAAIkG,YAAY,GAAG,CAAC,CAAElG,KAAK,CAACa,eAAgB;IAC5C,IAAIsF,WAAW,GAAGJ,YAAY,CAACI,WAAW;IAC1C,IAAIC,UAAU,GAAGL,YAAY,CAACK,UAAU;IACxC,IAAIC,YAAY,GAAGN,YAAY,CAACM,YAAY;IAC5C,IAAIC,SAAS,GAAGP,YAAY,CAACQ,KAAK;IAClC,IAAIjG,UAAU,GAAGyF,YAAY,CAACzF,UAAU;IACxC,IAAIkG,YAAY,GAAG,IAAI,CAAC/E,aAAa;IACrC,IAAIgF,KAAK,GAAGzG,KAAK,CAAC0G,CAAC,IAAI,CAAC;IACxB,IAAIC,KAAK,GAAG3G,KAAK,CAAC4G,CAAC,IAAI,CAAC;IACxB,IAAIC,SAAS,GAAG7G,KAAK,CAAC8G,KAAK,IAAIN,YAAY,CAACM,KAAK,IAAI,MAAM;IAC3D,IAAIC,aAAa,GAAG/G,KAAK,CAAC+G,aAAa,IAAIP,YAAY,CAACO,aAAa,IAAI,KAAK;IAC9E,IAAIC,KAAK,GAAGP,KAAK;IACjB,IAAIQ,KAAK,GAAG7H,WAAW,CAACuH,KAAK,EAAEZ,YAAY,CAACmB,aAAa,EAAEH,aAAa,CAAC;IACzE,IAAIf,UAAU,IAAIJ,WAAW,EAAE;MAC3B,IAAIuB,IAAI,GAAGhI,WAAW,CAACsH,KAAK,EAAEL,UAAU,EAAES,SAAS,CAAC;MACpD,IAAIO,IAAI,GAAGhI,WAAW,CAACuH,KAAK,EAAER,WAAW,EAAEY,aAAa,CAAC;MACzDf,UAAU,IAAI,IAAI,CAACqB,iBAAiB,CAACrH,KAAK,EAAEA,KAAK,EAAEmH,IAAI,EAAEC,IAAI,EAAEhB,UAAU,EAAED,WAAW,CAAC;IAC3F;IACAc,KAAK,IAAI3G,UAAU,GAAG,CAAC;IACvB,IAAIsF,WAAW,EAAE;MACboB,KAAK,GAAGM,kBAAkB,CAACb,KAAK,EAAEI,SAAS,EAAEjB,WAAW,CAAC;MACzD,IAAImB,aAAa,KAAK,KAAK,EAAE;QACzBE,KAAK,IAAIrB,WAAW,CAAC,CAAC,CAAC;MAC3B,CAAC,MACI,IAAImB,aAAa,KAAK,QAAQ,EAAE;QACjCE,KAAK,IAAIrB,WAAW,CAAC,CAAC,CAAC;MAC3B;IACJ;IACA,IAAI2B,gBAAgB,GAAG,CAAC;IACxB,IAAIC,cAAc,GAAG,KAAK;IAC1B,IAAIC,QAAQ,GAAGC,OAAO,CAAC,MAAM,IAAI1H,KAAK,GAChCA,KAAK,CAACH,IAAI,IACT2H,cAAc,GAAG,IAAI,EAAEhB,YAAY,CAAC3G,IAAI,CAAC,CAAC;IACjD,IAAI8H,UAAU,GAAGC,SAAS,CAAC,QAAQ,IAAI5H,KAAK,GACtCA,KAAK,CAACC,MAAM,GACX,CAACiG,YAAY,KACR,CAACM,YAAY,CAACqB,UAAU,IAAIL,cAAc,CAAC,IAC5CD,gBAAgB,GAAGzH,yBAAyB,EAAE0G,YAAY,CAACvG,MAAM,IAClE,IAAI,CAAC;IACf,IAAI6H,SAAS,GAAG9H,KAAK,CAACU,cAAc,GAAG,CAAC;IACxC,IAAIqH,iBAAiB,GAAG/H,KAAK,CAACO,KAAK,IAAI,IAAI,KACnCP,KAAK,CAACgI,QAAQ,KAAK,UAAU,IAAIhI,KAAK,CAACgI,QAAQ,KAAK,OAAO,IAAIhI,KAAK,CAACgI,QAAQ,KAAK,UAAU,CAAC;IACrG,IAAIC,oBAAoB,GAAGlC,YAAY,CAACkC,oBAAoB;IAC5D,KAAK,IAAIjG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsE,SAAS,CAACrE,MAAM,EAAED,CAAC,EAAE,EAAE;MACvC,IAAIkG,EAAE,GAAG,IAAI,CAAC3C,iBAAiB,CAAC7G,KAAK,CAAC;MACtC,IAAIyJ,UAAU,GAAGD,EAAE,CAACE,WAAW,EAAE;MACjCF,EAAE,CAACG,QAAQ,CAACF,UAAU,CAAC;MACvBA,UAAU,CAACtC,IAAI,GAAGS,SAAS,CAACtE,CAAC,CAAC;MAC9BmG,UAAU,CAACzB,CAAC,GAAGM,KAAK;MACpBmB,UAAU,CAACvB,CAAC,GAAGK,KAAK;MACpB,IAAIJ,SAAS,EAAE;QACXsB,UAAU,CAACtB,SAAS,GAAGA,SAAS;MACpC;MACAsB,UAAU,CAACG,YAAY,GAAG,QAAQ;MAClCH,UAAU,CAACI,OAAO,GAAGvI,KAAK,CAACuI,OAAO;MAClCJ,UAAU,CAACK,WAAW,GAAG,IAAI;MAC7B,IAAIV,SAAS,EAAE;QACXK,UAAU,CAACM,UAAU,GAAGzI,KAAK,CAACU,cAAc,IAAI,CAAC;QACjDyH,UAAU,CAACO,WAAW,GAAG1I,KAAK,CAACS,eAAe,IAAI,aAAa;QAC/D0H,UAAU,CAACQ,aAAa,GAAG3I,KAAK,CAACW,iBAAiB,IAAI,CAAC;QACvDwH,UAAU,CAACS,aAAa,GAAG5I,KAAK,CAACY,iBAAiB,IAAI,CAAC;MAC3D;MACAuH,UAAU,CAAClI,MAAM,GAAG0H,UAAU;MAC9BQ,UAAU,CAACtI,IAAI,GAAG4H,QAAQ;MAC1B,IAAIE,UAAU,EAAE;QACZQ,UAAU,CAAC/H,SAAS,GAAGJ,KAAK,CAACI,SAAS,IAAImH,gBAAgB;QAC1DY,UAAU,CAACU,QAAQ,GAAG7I,KAAK,CAAC6I,QAAQ;QACpCV,UAAU,CAACW,cAAc,GAAG9I,KAAK,CAAC8I,cAAc,IAAI,CAAC;MACzD;MACAX,UAAU,CAACxC,IAAI,GAAGD,QAAQ;MAC1BqD,eAAe,CAACZ,UAAU,EAAEnI,KAAK,CAAC;MAClCiH,KAAK,IAAI3G,UAAU;MACnB,IAAIyH,iBAAiB,EAAE;QACnBG,EAAE,CAACc,eAAe,CAAC,IAAIzJ,YAAY,CAACJ,WAAW,CAACgJ,UAAU,CAACzB,CAAC,EAAE1G,KAAK,CAACO,KAAK,EAAE4H,UAAU,CAACtB,SAAS,CAAC,EAAEzH,WAAW,CAAC+I,UAAU,CAACvB,CAAC,EAAEqB,oBAAoB,EAAEE,UAAU,CAACG,YAAY,CAAC,EAAEjC,YAAY,EAAE4B,oBAAoB,CAAC,CAAC;MACpN;IACJ;EACJ,CAAC;EACD/G,MAAM,CAACS,SAAS,CAACyB,gBAAgB,GAAG,YAAY;IAC5C,IAAIpD,KAAK,GAAG,IAAI,CAACA,KAAK;IACtB,IAAI6F,IAAI,GAAGC,YAAY,CAAC9F,KAAK,CAAC;IAC9B,IAAI+F,YAAY,GAAGvH,aAAa,CAACqH,IAAI,EAAE7F,KAAK,CAAC;IAC7C,IAAIqG,YAAY,GAAGN,YAAY,CAACxF,KAAK;IACrC,IAAI6F,UAAU,GAAGL,YAAY,CAACK,UAAU;IACxC,IAAID,WAAW,GAAGJ,YAAY,CAACI,WAAW;IAC1C,IAAIP,WAAW,GAAG5F,KAAK,CAACc,OAAO;IAC/B,IAAI2F,KAAK,GAAGzG,KAAK,CAAC0G,CAAC,IAAI,CAAC;IACxB,IAAIC,KAAK,GAAG3G,KAAK,CAAC4G,CAAC,IAAI,CAAC;IACxB,IAAIJ,YAAY,GAAG,IAAI,CAAC/E,aAAa;IACrC,IAAIoF,SAAS,GAAG7G,KAAK,CAAC8G,KAAK,IAAIN,YAAY,CAACM,KAAK;IACjD,IAAIC,aAAa,GAAG/G,KAAK,CAAC+G,aAAa,IAAIP,YAAY,CAACO,aAAa;IACrE,IAAII,IAAI,GAAGhI,WAAW,CAACsH,KAAK,EAAEL,UAAU,EAAES,SAAS,CAAC;IACpD,IAAIO,IAAI,GAAGhI,WAAW,CAACuH,KAAK,EAAER,WAAW,EAAEY,aAAa,CAAC;IACzD,IAAIkC,KAAK,GAAG9B,IAAI;IAChB,IAAI+B,OAAO,GAAG9B,IAAI;IAClB,IAAIxB,WAAW,EAAE;MACbqD,KAAK,IAAIrD,WAAW,CAAC,CAAC,CAAC;MACvBsD,OAAO,IAAItD,WAAW,CAAC,CAAC,CAAC;IAC7B;IACA,IAAIuD,MAAM,GAAGF,KAAK,GAAG5C,YAAY;IACjC,IAAIJ,kBAAkB,CAACjG,KAAK,CAAC,EAAE;MAC3B,IAAI,CAACqH,iBAAiB,CAACrH,KAAK,EAAEA,KAAK,EAAEmH,IAAI,EAAEC,IAAI,EAAEhB,UAAU,EAAED,WAAW,CAAC;IAC7E;IACA,IAAID,YAAY,GAAG,CAAC,CAAElG,KAAK,CAACa,eAAgB;IAC5C,KAAK,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+D,YAAY,CAACQ,KAAK,CAACtE,MAAM,EAAED,CAAC,EAAE,EAAE;MAChD,IAAIoH,IAAI,GAAGrD,YAAY,CAACQ,KAAK,CAACvE,CAAC,CAAC;MAChC,IAAIqH,MAAM,GAAGD,IAAI,CAACC,MAAM;MACxB,IAAIC,UAAU,GAAGD,MAAM,CAACpH,MAAM;MAC9B,IAAI3B,UAAU,GAAG8I,IAAI,CAAC9I,UAAU;MAChC,IAAIiJ,aAAa,GAAGH,IAAI,CAAC7I,KAAK;MAC9B,IAAIiJ,SAAS,GAAG,CAAC;MACjB,IAAIC,SAAS,GAAGR,KAAK;MACrB,IAAIS,UAAU,GAAGP,MAAM;MACvB,IAAIQ,UAAU,GAAGL,UAAU,GAAG,CAAC;MAC/B,IAAIM,KAAK,GAAG,KAAK,CAAC;MAClB,OAAOJ,SAAS,GAAGF,UAAU,KACrBM,KAAK,GAAGP,MAAM,CAACG,SAAS,CAAC,EAAE,CAACI,KAAK,CAAC9C,KAAK,IAAI8C,KAAK,CAAC9C,KAAK,KAAK,MAAM,CAAC,EAAE;QACxE,IAAI,CAAC+C,WAAW,CAACD,KAAK,EAAE5J,KAAK,EAAEM,UAAU,EAAE4I,OAAO,EAAEO,SAAS,EAAE,MAAM,EAAEvD,YAAY,CAAC;QACpFqD,aAAa,IAAIK,KAAK,CAACrJ,KAAK;QAC5BkJ,SAAS,IAAIG,KAAK,CAACrJ,KAAK;QACxBiJ,SAAS,EAAE;MACf;MACA,OAAOG,UAAU,IAAI,CAAC,KACdC,KAAK,GAAGP,MAAM,CAACM,UAAU,CAAC,EAAEC,KAAK,CAAC9C,KAAK,KAAK,OAAO,CAAC,EAAE;QAC1D,IAAI,CAAC+C,WAAW,CAACD,KAAK,EAAE5J,KAAK,EAAEM,UAAU,EAAE4I,OAAO,EAAEQ,UAAU,EAAE,OAAO,EAAExD,YAAY,CAAC;QACtFqD,aAAa,IAAIK,KAAK,CAACrJ,KAAK;QAC5BmJ,UAAU,IAAIE,KAAK,CAACrJ,KAAK;QACzBoJ,UAAU,EAAE;MAChB;MACAF,SAAS,IAAI,CAACpD,YAAY,IAAIoD,SAAS,GAAGR,KAAK,CAAC,IAAIE,MAAM,GAAGO,UAAU,CAAC,GAAGH,aAAa,IAAI,CAAC;MAC7F,OAAOC,SAAS,IAAIG,UAAU,EAAE;QAC5BC,KAAK,GAAGP,MAAM,CAACG,SAAS,CAAC;QACzB,IAAI,CAACK,WAAW,CAACD,KAAK,EAAE5J,KAAK,EAAEM,UAAU,EAAE4I,OAAO,EAAEO,SAAS,GAAGG,KAAK,CAACrJ,KAAK,GAAG,CAAC,EAAE,QAAQ,EAAE2F,YAAY,CAAC;QACxGuD,SAAS,IAAIG,KAAK,CAACrJ,KAAK;QACxBiJ,SAAS,EAAE;MACf;MACAN,OAAO,IAAI5I,UAAU;IACzB;EACJ,CAAC;EACDY,MAAM,CAACS,SAAS,CAACkI,WAAW,GAAG,UAAUD,KAAK,EAAE5J,KAAK,EAAEM,UAAU,EAAE4I,OAAO,EAAExC,CAAC,EAAEG,SAAS,EAAEiD,kBAAkB,EAAE;IAC1G,IAAIC,UAAU,GAAG/J,KAAK,CAACmD,IAAI,CAACyG,KAAK,CAACI,SAAS,CAAC,IAAI,CAAC,CAAC;IAClDD,UAAU,CAAClE,IAAI,GAAG+D,KAAK,CAAC/D,IAAI;IAC5B,IAAIkB,aAAa,GAAG6C,KAAK,CAAC7C,aAAa;IACvC,IAAIH,CAAC,GAAGsC,OAAO,GAAG5I,UAAU,GAAG,CAAC;IAChC,IAAIyG,aAAa,KAAK,KAAK,EAAE;MACzBH,CAAC,GAAGsC,OAAO,GAAGU,KAAK,CAACpJ,MAAM,GAAG,CAAC;IAClC,CAAC,MACI,IAAIuG,aAAa,KAAK,QAAQ,EAAE;MACjCH,CAAC,GAAGsC,OAAO,GAAG5I,UAAU,GAAGsJ,KAAK,CAACpJ,MAAM,GAAG,CAAC;IAC/C;IACA,IAAIwF,UAAU,GAAG,CAAC4D,KAAK,CAACK,YAAY,IAAIhE,kBAAkB,CAAC8D,UAAU,CAAC;IACtE/D,UAAU,IAAI,IAAI,CAACqB,iBAAiB,CAAC0C,UAAU,EAAE/J,KAAK,EAAE6G,SAAS,KAAK,OAAO,GACvEH,CAAC,GAAGkD,KAAK,CAACrJ,KAAK,GACfsG,SAAS,KAAK,QAAQ,GAClBH,CAAC,GAAGkD,KAAK,CAACrJ,KAAK,GAAG,CAAC,GACnBmG,CAAC,EAAEE,CAAC,GAAGgD,KAAK,CAACpJ,MAAM,GAAG,CAAC,EAAEoJ,KAAK,CAACrJ,KAAK,EAAEqJ,KAAK,CAACpJ,MAAM,CAAC;IAC7D,IAAI0F,YAAY,GAAG,CAAC,CAAC6D,UAAU,CAAClJ,eAAe;IAC/C,IAAI+E,WAAW,GAAGgE,KAAK,CAAChE,WAAW;IACnC,IAAIA,WAAW,EAAE;MACbc,CAAC,GAAGY,kBAAkB,CAACZ,CAAC,EAAEG,SAAS,EAAEjB,WAAW,CAAC;MACjDgB,CAAC,IAAIgD,KAAK,CAACpJ,MAAM,GAAG,CAAC,GAAGoF,WAAW,CAAC,CAAC,CAAC,GAAGgE,KAAK,CAACM,WAAW,GAAG,CAAC;IAClE;IACA,IAAIhC,EAAE,GAAG,IAAI,CAAC3C,iBAAiB,CAAC7G,KAAK,CAAC;IACtC,IAAIyJ,UAAU,GAAGD,EAAE,CAACE,WAAW,EAAE;IACjCF,EAAE,CAACG,QAAQ,CAACF,UAAU,CAAC;IACvB,IAAI3B,YAAY,GAAG,IAAI,CAAC/E,aAAa;IACrC,IAAI+F,cAAc,GAAG,KAAK;IAC1B,IAAID,gBAAgB,GAAG,CAAC;IACxB,IAAIE,QAAQ,GAAGC,OAAO,CAAC,MAAM,IAAIqC,UAAU,GAAGA,UAAU,CAAClK,IAAI,GACvD,MAAM,IAAIG,KAAK,GAAGA,KAAK,CAACH,IAAI,IACvB2H,cAAc,GAAG,IAAI,EAAEhB,YAAY,CAAC3G,IAAI,CAAC,CAAC;IACrD,IAAI8H,UAAU,GAAGC,SAAS,CAAC,QAAQ,IAAImC,UAAU,GAAGA,UAAU,CAAC9J,MAAM,GAC/D,QAAQ,IAAID,KAAK,GAAGA,KAAK,CAACC,MAAM,GAC3B,CAACiG,YAAY,IACT,CAAC4D,kBAAkB,KAClB,CAACtD,YAAY,CAACqB,UAAU,IAAIL,cAAc,CAAC,IAAKD,gBAAgB,GAAGzH,yBAAyB,EAAE0G,YAAY,CAACvG,MAAM,IACnH,IAAI,CAAC;IACnB,IAAI6H,SAAS,GAAGiC,UAAU,CAACrJ,cAAc,GAAG,CAAC,IACtCV,KAAK,CAACU,cAAc,GAAG,CAAC;IAC/ByH,UAAU,CAACtC,IAAI,GAAG+D,KAAK,CAAC/D,IAAI;IAC5BsC,UAAU,CAACzB,CAAC,GAAGA,CAAC;IAChByB,UAAU,CAACvB,CAAC,GAAGA,CAAC;IAChB,IAAIkB,SAAS,EAAE;MACXK,UAAU,CAACM,UAAU,GAAGsB,UAAU,CAACrJ,cAAc,IAAIV,KAAK,CAACU,cAAc,IAAI,CAAC;MAC9EyH,UAAU,CAACO,WAAW,GAAGqB,UAAU,CAACtJ,eAAe,IAAIT,KAAK,CAACS,eAAe,IAAI,aAAa;MAC7F0H,UAAU,CAACQ,aAAa,GAAGoB,UAAU,CAACpJ,iBAAiB,IAAIX,KAAK,CAACW,iBAAiB,IAAI,CAAC;MACvFwH,UAAU,CAACS,aAAa,GAAGmB,UAAU,CAACnJ,iBAAiB,IAAIZ,KAAK,CAACY,iBAAiB,IAAI,CAAC;IAC3F;IACAuH,UAAU,CAACtB,SAAS,GAAGA,SAAS;IAChCsB,UAAU,CAACG,YAAY,GAAG,QAAQ;IAClCH,UAAU,CAACxC,IAAI,GAAGiE,KAAK,CAACjE,IAAI,IAAIjG,YAAY;IAC5CyI,UAAU,CAACI,OAAO,GAAGxJ,SAAS,CAACgL,UAAU,CAACxB,OAAO,EAAEvI,KAAK,CAACuI,OAAO,EAAE,CAAC,CAAC;IACpEQ,eAAe,CAACZ,UAAU,EAAE4B,UAAU,CAAC;IACvC,IAAIpC,UAAU,EAAE;MACZQ,UAAU,CAAC/H,SAAS,GAAGrB,SAAS,CAACgL,UAAU,CAAC3J,SAAS,EAAEJ,KAAK,CAACI,SAAS,EAAEmH,gBAAgB,CAAC;MACzFY,UAAU,CAACU,QAAQ,GAAGlK,SAAS,CAACoL,UAAU,CAAClB,QAAQ,EAAE7I,KAAK,CAAC6I,QAAQ,CAAC;MACpEV,UAAU,CAACW,cAAc,GAAG9I,KAAK,CAAC8I,cAAc,IAAI,CAAC;MACrDX,UAAU,CAAClI,MAAM,GAAG0H,UAAU;IAClC;IACA,IAAIF,QAAQ,EAAE;MACVU,UAAU,CAACtI,IAAI,GAAG4H,QAAQ;IAC9B;IACA,IAAI0C,SAAS,GAAGP,KAAK,CAACvD,YAAY;IAClC,IAAI+D,UAAU,GAAGR,KAAK,CAAC1C,aAAa;IACpCgB,EAAE,CAACc,eAAe,CAAC,IAAIzJ,YAAY,CAACJ,WAAW,CAACgJ,UAAU,CAACzB,CAAC,EAAEyD,SAAS,EAAEhC,UAAU,CAACtB,SAAS,CAAC,EAAEzH,WAAW,CAAC+I,UAAU,CAACvB,CAAC,EAAEwD,UAAU,EAAEjC,UAAU,CAACG,YAAY,CAAC,EAAE6B,SAAS,EAAEC,UAAU,CAAC,CAAC;EAC3L,CAAC;EACDlJ,MAAM,CAACS,SAAS,CAAC0F,iBAAiB,GAAG,UAAUrH,KAAK,EAAEqK,QAAQ,EAAE3D,CAAC,EAAEE,CAAC,EAAErG,KAAK,EAAEC,MAAM,EAAE;IACjF,IAAI8J,mBAAmB,GAAGtK,KAAK,CAACa,eAAe;IAC/C,IAAI0J,eAAe,GAAGvK,KAAK,CAACgB,WAAW;IACvC,IAAIwJ,eAAe,GAAGxK,KAAK,CAACe,WAAW;IACvC,IAAI0J,SAAS,GAAGH,mBAAmB,IAAIA,mBAAmB,CAACI,KAAK;IAChE,IAAIC,mBAAmB,GAAGL,mBAAmB,IAAI,CAACG,SAAS;IAC3D,IAAIG,gBAAgB,GAAG5K,KAAK,CAACiB,YAAY;IACzC,IAAI4J,IAAI,GAAG,IAAI;IACf,IAAIC,MAAM;IACV,IAAIC,KAAK;IACT,IAAIJ,mBAAmB,IAAI3K,KAAK,CAACM,UAAU,IAAKiK,eAAe,IAAIC,eAAgB,EAAE;MACjFM,MAAM,GAAG,IAAI,CAACvF,iBAAiB,CAACjG,IAAI,CAAC;MACrCwL,MAAM,CAACzC,QAAQ,CAACyC,MAAM,CAAC1C,WAAW,EAAE,CAAC;MACrC0C,MAAM,CAAC9K,KAAK,CAACH,IAAI,GAAG,IAAI;MACxB,IAAImL,SAAS,GAAGF,MAAM,CAACG,KAAK;MAC5BD,SAAS,CAACtE,CAAC,GAAGA,CAAC;MACfsE,SAAS,CAACpE,CAAC,GAAGA,CAAC;MACfoE,SAAS,CAACzK,KAAK,GAAGA,KAAK;MACvByK,SAAS,CAACxK,MAAM,GAAGA,MAAM;MACzBwK,SAAS,CAACE,CAAC,GAAGN,gBAAgB;MAC9BE,MAAM,CAACK,UAAU,EAAE;IACvB;IACA,IAAIR,mBAAmB,EAAE;MACrB,IAAIS,SAAS,GAAGN,MAAM,CAAC9K,KAAK;MAC5BoL,SAAS,CAACvL,IAAI,GAAGyK,mBAAmB,IAAI,IAAI;MAC5Cc,SAAS,CAAClL,WAAW,GAAGvB,SAAS,CAACqB,KAAK,CAACE,WAAW,EAAE,CAAC,CAAC;IAC3D,CAAC,MACI,IAAIuK,SAAS,EAAE;MAChBM,KAAK,GAAG,IAAI,CAACxF,iBAAiB,CAAClG,OAAO,CAAC;MACvC0L,KAAK,CAACM,MAAM,GAAG,YAAY;QACvBR,IAAI,CAACS,UAAU,EAAE;MACrB,CAAC;MACD,IAAIC,QAAQ,GAAGR,KAAK,CAAC/K,KAAK;MAC1BuL,QAAQ,CAACb,KAAK,GAAGJ,mBAAmB,CAACI,KAAK;MAC1Ca,QAAQ,CAAC7E,CAAC,GAAGA,CAAC;MACd6E,QAAQ,CAAC3E,CAAC,GAAGA,CAAC;MACd2E,QAAQ,CAAChL,KAAK,GAAGA,KAAK;MACtBgL,QAAQ,CAAC/K,MAAM,GAAGA,MAAM;IAC5B;IACA,IAAI+J,eAAe,IAAIC,eAAe,EAAE;MACpC,IAAIY,SAAS,GAAGN,MAAM,CAAC9K,KAAK;MAC5BoL,SAAS,CAAChL,SAAS,GAAGmK,eAAe;MACrCa,SAAS,CAACnL,MAAM,GAAGuK,eAAe;MAClCY,SAAS,CAACjL,aAAa,GAAGxB,SAAS,CAACqB,KAAK,CAACG,aAAa,EAAE,CAAC,CAAC;MAC3DiL,SAAS,CAACvC,QAAQ,GAAG7I,KAAK,CAACwL,UAAU;MACrCJ,SAAS,CAACtC,cAAc,GAAG9I,KAAK,CAACyL,gBAAgB,IAAI,CAAC;MACtDX,MAAM,CAACY,sBAAsB,GAAG,CAAC;MACjC,IAAIZ,MAAM,CAACa,OAAO,EAAE,IAAIb,MAAM,CAACc,SAAS,EAAE,EAAE;QACxCR,SAAS,CAAC5C,WAAW,GAAG,IAAI;QAC5B4C,SAAS,CAAChL,SAAS,IAAI,CAAC;MAC5B;IACJ;IACA,IAAIyL,WAAW,GAAG,CAACf,MAAM,IAAIC,KAAK,EAAE/K,KAAK;IACzC6L,WAAW,CAACpD,UAAU,GAAGzI,KAAK,CAACyI,UAAU,IAAI,CAAC;IAC9CoD,WAAW,CAACnD,WAAW,GAAG1I,KAAK,CAAC0I,WAAW,IAAI,aAAa;IAC5DmD,WAAW,CAAClD,aAAa,GAAG3I,KAAK,CAAC2I,aAAa,IAAI,CAAC;IACpDkD,WAAW,CAACjD,aAAa,GAAG5I,KAAK,CAAC4I,aAAa,IAAI,CAAC;IACpDiD,WAAW,CAACtD,OAAO,GAAGxJ,SAAS,CAACiB,KAAK,CAACuI,OAAO,EAAE8B,QAAQ,CAAC9B,OAAO,EAAE,CAAC,CAAC;EACvE,CAAC;EACDrH,MAAM,CAAC4K,QAAQ,GAAG,UAAU9L,KAAK,EAAE;IAC/B,IAAI2F,IAAI,GAAG,EAAE;IACb,IAAIoG,eAAe,CAAC/L,KAAK,CAAC,EAAE;MACxB2F,IAAI,GAAG,CACH3F,KAAK,CAACgM,SAAS,EACfhM,KAAK,CAACiM,UAAU,EAChBC,aAAa,CAAClM,KAAK,CAACK,QAAQ,CAAC,EAC7BL,KAAK,CAACmM,UAAU,IAAI,YAAY,CACnC,CAACC,IAAI,CAAC,GAAG,CAAC;IACf;IACA,OAAOzG,IAAI,IAAI7G,IAAI,CAAC6G,IAAI,CAAC,IAAI3F,KAAK,CAAC0F,QAAQ,IAAI1F,KAAK,CAAC2F,IAAI;EAC7D,CAAC;EACD,OAAOzE,MAAM;AACjB,CAAC,CAAC1B,WAAW,CAAE;AACf,IAAI6M,gBAAgB,GAAG;EAAEC,IAAI,EAAE,IAAI;EAAEC,KAAK,EAAE,CAAC;EAAEC,MAAM,EAAE;AAAE,CAAC;AAC1D,IAAIC,yBAAyB,GAAG;EAAEC,GAAG,EAAE,CAAC;EAAEC,MAAM,EAAE,CAAC;EAAEC,MAAM,EAAE;AAAE,CAAC;AAChE,IAAIC,UAAU,GAAG,CAAC,WAAW,EAAE,YAAY,EAAE,UAAU,EAAE,YAAY,CAAC;AACtE,OAAO,SAASX,aAAaA,CAAC7L,QAAQ,EAAE;EACpC,IAAI,OAAOA,QAAQ,KAAK,QAAQ,KACxBA,QAAQ,CAACyM,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAC1BzM,QAAQ,CAACyM,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAC9BzM,QAAQ,CAACyM,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;IACvC,OAAOzM,QAAQ;EACnB,CAAC,MACI,IAAI,CAAC0M,KAAK,CAAC,CAAC1M,QAAQ,CAAC,EAAE;IACxB,OAAOA,QAAQ,GAAG,IAAI;EAC1B,CAAC,MACI;IACD,OAAOV,iBAAiB,GAAG,IAAI;EACnC;AACJ;AACA,SAASoJ,eAAeA,CAAChE,WAAW,EAAEC,WAAW,EAAE;EAC/C,KAAK,IAAIhD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6K,UAAU,CAAC5K,MAAM,EAAED,CAAC,EAAE,EAAE;IACxC,IAAIgL,QAAQ,GAAGH,UAAU,CAAC7K,CAAC,CAAC;IAC5B,IAAIiL,GAAG,GAAGjI,WAAW,CAACgI,QAAQ,CAAC;IAC/B,IAAIC,GAAG,IAAI,IAAI,EAAE;MACblI,WAAW,CAACiI,QAAQ,CAAC,GAAGC,GAAG;IAC/B;EACJ;AACJ;AACA,OAAO,SAASlB,eAAeA,CAAC/L,KAAK,EAAE;EACnC,OAAOA,KAAK,CAACK,QAAQ,IAAI,IAAI,IAAIL,KAAK,CAACmM,UAAU,IAAInM,KAAK,CAACiM,UAAU;AACzE;AACA,OAAO,SAAS/I,kBAAkBA,CAAClD,KAAK,EAAE;EACtCkN,cAAc,CAAClN,KAAK,CAAC;EACrBpB,IAAI,CAACoB,KAAK,CAACmD,IAAI,EAAE+J,cAAc,CAAC;EAChC,OAAOlN,KAAK;AAChB;AACA,SAASkN,cAAcA,CAAClN,KAAK,EAAE;EAC3B,IAAIA,KAAK,EAAE;IACPA,KAAK,CAAC2F,IAAI,GAAGzE,MAAM,CAAC4K,QAAQ,CAAC9L,KAAK,CAAC;IACnC,IAAI6G,SAAS,GAAG7G,KAAK,CAAC8G,KAAK;IAC3BD,SAAS,KAAK,QAAQ,KAAKA,SAAS,GAAG,QAAQ,CAAC;IAChD7G,KAAK,CAAC8G,KAAK,GAAID,SAAS,IAAI,IAAI,IAAIwF,gBAAgB,CAACxF,SAAS,CAAC,GAAIA,SAAS,GAAG,MAAM;IACrF,IAAIE,aAAa,GAAG/G,KAAK,CAAC+G,aAAa;IACvCA,aAAa,KAAK,QAAQ,KAAKA,aAAa,GAAG,QAAQ,CAAC;IACxD/G,KAAK,CAAC+G,aAAa,GAAIA,aAAa,IAAI,IAAI,IAAI0F,yBAAyB,CAAC1F,aAAa,CAAC,GAAIA,aAAa,GAAG,KAAK;IACjH,IAAInB,WAAW,GAAG5F,KAAK,CAACc,OAAO;IAC/B,IAAI8E,WAAW,EAAE;MACb5F,KAAK,CAACc,OAAO,GAAGjC,iBAAiB,CAACmB,KAAK,CAACc,OAAO,CAAC;IACpD;EACJ;AACJ;AACA,SAAS8G,SAASA,CAAC3H,MAAM,EAAEG,SAAS,EAAE;EAClC,OAAQH,MAAM,IAAI,IAAI,IAAIG,SAAS,IAAI,CAAC,IAAIH,MAAM,KAAK,aAAa,IAAIA,MAAM,KAAK,MAAM,GACnF,IAAI,GACHA,MAAM,CAACyK,KAAK,IAAIzK,MAAM,CAACkN,UAAU,GAC9B,MAAM,GACNlN,MAAM;AACpB;AACA,SAASyH,OAAOA,CAAC7H,IAAI,EAAE;EACnB,OAAQA,IAAI,IAAI,IAAI,IAAIA,IAAI,KAAK,MAAM,GACjC,IAAI,GACHA,IAAI,CAAC6K,KAAK,IAAI7K,IAAI,CAACsN,UAAU,GAC1B,MAAM,GACNtN,IAAI;AAClB;AACA,SAASyH,kBAAkBA,CAACZ,CAAC,EAAEG,SAAS,EAAEjB,WAAW,EAAE;EACnD,OAAOiB,SAAS,KAAK,OAAO,GACrBH,CAAC,GAAGd,WAAW,CAAC,CAAC,CAAC,GACnBiB,SAAS,KAAK,QAAQ,GACjBH,CAAC,GAAGd,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGA,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAC3Cc,CAAC,GAAGd,WAAW,CAAC,CAAC,CAAE;AAClC;AACA,SAASE,YAAYA,CAAC9F,KAAK,EAAE;EACzB,IAAI6F,IAAI,GAAG7F,KAAK,CAAC6F,IAAI;EACrBA,IAAI,IAAI,IAAI,KAAKA,IAAI,IAAI,EAAE,CAAC;EAC5B,OAAOA,IAAI;AACf;AACA,SAASI,kBAAkBA,CAACjG,KAAK,EAAE;EAC/B,OAAO,CAAC,EAAEA,KAAK,CAACa,eAAe,IACxBb,KAAK,CAACM,UAAU,IACfN,KAAK,CAACgB,WAAW,IAAIhB,KAAK,CAACe,WAAY,CAAC;AACpD;AACA,eAAeG,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}